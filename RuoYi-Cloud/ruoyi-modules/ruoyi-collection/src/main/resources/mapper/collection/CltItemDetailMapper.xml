<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.collection.mapper.CltItemDetailMapper">
  <resultMap type="CltItemDetail" id="CltItemDetailResult">
    <result property="itemId" column="item_id"/>
    <result property="examId" column="exam_id"/>
    <result property="testpaperId" column="testpaper_id"/>
    <result property="subjectCode" column="subject_code"/>
    <result property="scorePoint" column="score_point"/>
    <result property="littleTitleNo" column="little_title_no"/>
    <result property="bigTitleNo" column="big_title_no"/>
    <result property="scorePointType" column="score_point_type"/>
    <result property="fullscore" column="fullScore"/>
    <result property="allOptions" column="all_options"/>
    <result property="rightOptioin" column="right_optioin"/>
    <result property="forecastDifficulty" column="forecast_difficulty"/>
    <result property="isChoice" column="is_choice"/>
    <result property="choiceGroup" column="choice_group"/>
    <result property="choiceRule" column="choice_rule"/>
    <result property="cjField" column="cj_field"/>
    <result property="extensions" column="extensions"/>
    <result property="orderNum" column="order_num"/>
    <result property="remark" column="remark"/>
    <result property="status" column="status"/>
    <result property="delFlag" column="del_flag"/>
    <result property="createBy" column="create_by"/>
    <result property="createTime" column="create_time"/>
    <result property="updateBy" column="update_by"/>
    <result property="updateTime" column="update_time"/>
  </resultMap>

  <sql id="selectCltItemDetailVo">
        select item_id, exam_id, testpaper_id, subject_code, score_point, little_title_no, big_title_no, score_point_type, fullScore, all_options, right_optioin, forecast_difficulty, is_choice, choice_group, choice_rule, cj_field, extensions, order_num, remark, status, del_flag, create_by, create_time, update_by, update_time from clt_item_detail
    </sql>
  <select id="selectCltItemDetailList" parameterType="CltItemDetail"
    resultMap="CltItemDetailResult">
    <include refid="selectCltItemDetailVo"/>
    <where>
      <if test="examId != null  and examId != ''">and exam_id = #{examId}
      </if>
      <if test="testpaperId != null  and testpaperId != ''">and testpaper_id = #{testpaperId}
      </if>
      <if test="subjectCode != null  and subjectCode != ''">and subject_code = #{subjectCode}
      </if>
    </where>
    order by order_num
  </select>
  <delete id="deleteItemDetailByExamId">
    DELETE FROM `clt_item_detail` where exam_id=${examId};
  </delete>

<!--  <insert id="copyItemDetailToPorject" parameterType="AlyTestpaper">-->
<!--    INSERT INTO aly_item_detail(aly_item_id,project_id,aly_testpaper_id,subject_code,-->
<!--    score_point,little_title_no,big_title_no,score_point_type,-->
<!--    fullScore,all_options,right_optioin,forecast_difficulty,-->
<!--    is_choice,choice_group,choice_rule,extensions,order_num, create_time)-->

<!--    SELECT  UUID() aly_item_id,#{projectId} project_id,#{alyTestpaperId} aly_testpaper_id,subject_code,-->
<!--    score_point,little_title_no,big_title_no,score_point_type,-->
<!--    fullScore,all_options,right_optioin,forecast_difficulty,-->
<!--    is_choice,choice_group,choice_rule,extensions,order_num ,NOW() create_time-->
<!--    FROM clt_item_detail WHERE testpaper_id=#{testpaperId}-->
<!--  </insert>-->
</mapper>
