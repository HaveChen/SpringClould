<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.collection.mapper.CltTestpaperDetailMapper">
  <resultMap type="CltTestpaperDetail" id="CltTestpaperDetailResult">
    <result property="testpaperDetailId" column="testpaper_detail_id"/>
    <result property="testpaperId" column="testpaper_id"/>
    <result property="examId" column="exam_id"/>
    <result property="subjectCode" column="subject_code"/>
    <result property="fullscore" column="fullscore"/>
    <result property="kgscore" column="kgscore"/>
    <result property="zgscore" column="zgscore"/>
    <result property="orderNum" column="order_num"/>
    <result property="remark" column="remark"/>
    <result property="status" column="status"/>
    <result property="delFlag" column="del_flag"/>
    <result property="createBy" column="create_by"/>
    <result property="createTime" column="create_time"/>
    <result property="updateBy" column="update_by"/>
    <result property="updateTime" column="update_time"/>
  </resultMap>

  <sql id="selectCltTestpaperDetailVo">
        select
          testpaper_detail_id, testpaper_id, exam_id, subject_code,
          fullscore, kgscore, zgscore, order_num, remark, status, del_flag,
          create_by, create_time, update_by, update_time
        from
            clt_testpaper_detail
    </sql>
  <select id="selectCltTestpaperDetailList" parameterType="CltTestpaperDetail"
    resultMap="CltTestpaperDetailResult">
    <include refid="selectCltTestpaperDetailVo"/>
    <where>
      <if test="testpaperId != null ">and testpaper_id = #{testpaperId}
      </if>
      <if test="examId != null ">and exam_id = #{examId}
      </if>
      <if test="subjectCode != null ">and subject_Code = #{subjectCode}
      </if>
    </where>
    order by order_num
  </select>

  <delete id="deleteTestpaperDetailByExamId">
    DELETE FROM `clt_testpaper_detail` where exam_id=${examId};
  </delete>

<!--  <insert id="copyTestPaperDetalToProject" parameterType="AlyTestpaper">-->
<!--    INSERT INTO  aly_testpaper_detail(aly_testpaper_id,project_id,subject_code,fullscore,kgscore,zgscore,order_num,create_time)-->
<!--    SELECT #{alyTestpaperId} aly_testpaper_id,#{projectId} project_id,subject_code,fullscore,kgscore,zgscore,order_num,NOW() create_time-->
<!--        FROM clt_testpaper_detail WHERE testpaper_id=#{testpaperId}-->
<!--  </insert>-->

</mapper>
